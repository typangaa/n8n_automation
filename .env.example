# n8n Environment Variables for Railway Deployment
# Copy these to Railway Dashboard → Variables tab

# ============================================
# REQUIRED: n8n Public URL Configuration
# ============================================
# Your Railway deployment URL

WEBHOOK_URL=https://n8nautomation-production-7a8c.up.railway.app/
N8N_EDITOR_BASE_URL=https://n8nautomation-production-7a8c.up.railway.app
N8N_PROTOCOL=https
N8N_HOST=n8nautomation-production-7a8c.up.railway.app

# ============================================
# REQUIRED: n8n Basic Authentication
# ============================================
# Change the password to something secure!

N8N_BASIC_AUTH_ACTIVE=true
N8N_BASIC_AUTH_USER=admin
N8N_BASIC_AUTH_PASSWORD=changeme123

# ============================================
# REQUIRED: Timezone Configuration
# ============================================
# Set to Australia/Adelaide for correct schedule times

GENERIC_TIMEZONE=Australia/Adelaide
TZ=Australia/Adelaide

# ============================================
# OPTIONAL: n8n Advanced Configuration
# ============================================

# Enforce secure settings file permissions (recommended)
N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS=true

# Enable execution logging (useful for debugging)
# EXECUTIONS_DATA_SAVE_ON_ERROR=all
# EXECUTIONS_DATA_SAVE_ON_SUCCESS=all
# EXECUTIONS_DATA_SAVE_MANUAL_EXECUTIONS=true

# Maximum execution timeout (in seconds)
# EXECUTIONS_TIMEOUT=3600

# Number of executions to keep in database
# EXECUTIONS_DATA_MAX_AGE=168

# ============================================
# LOCAL DEVELOPMENT ONLY (docker-compose)
# ============================================
# These are already set in docker-compose.yml
# Do NOT set these in Railway:

# N8N_PORT=5678
# N8N_HOST=0.0.0.0
# WEBHOOK_URL=http://localhost:5678/

# ============================================
# RAILWAY AUTO-MANAGED (Do not set manually)
# ============================================
# Railway automatically provides:
# - PORT (usually 5678 for n8n)
# - RAILWAY_ENVIRONMENT
# - RAILWAY_PROJECT_ID
# - RAILWAY_SERVICE_ID

# ============================================
# VARIABLE VALIDATION CHECKLIST
# ============================================
# Before deploying, verify in Railway Dashboard → Variables:

# ✅ REQUIRED Variables (8 total):
#    1. WEBHOOK_URL (must end with /)
#    2. N8N_EDITOR_BASE_URL (no trailing slash)
#    3. N8N_PROTOCOL (must be "https")
#    4. N8N_HOST (hostname only, no protocol)
#    5. N8N_BASIC_AUTH_ACTIVE (true)
#    6. N8N_BASIC_AUTH_USER (admin)
#    7. N8N_BASIC_AUTH_PASSWORD (your secure password)
#    8. GENERIC_TIMEZONE (Australia/Adelaide)
#    9. TZ (Australia/Adelaide)

# ❌ NEVER SET THESE (causes errors):
#    - PORT (Railway auto-assigns)
#    - N8N_PORT (conflicts with Railway PORT)
#    - N8N_HOST=0.0.0.0 (forces localhost mode)

# ⚠️ COMMON MISTAKES:
#    - Missing trailing slash: WEBHOOK_URL must end with /
#    - Using http:// instead of https://
#    - Setting N8N_HOST to 0.0.0.0 or localhost
#    - Copying PORT from local development
#    - Forgetting to change default password
